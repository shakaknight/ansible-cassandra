---
# tasks file for cassandraInstall
- name: Installing elastic Serch in ubuntu
  when: ansible_facts['distribution'] == "Ubuntu"
  block:
    - name: Add cassandra apt key
      apt_key:
        url: "https://www.apache.org/dist/cassandra/KEYS"
        state: present
        
    # Add the Cassandra apt repo. For versions 6 of the stack - use '6.x-prerelease':
    - name: Adding cassandra repo
      apt_repository:
        repo: deb http://www.apache.org/dist/cassandra/debian 40x main
        state: present
    #Install cassandra
    - name: Install cassandra with apt
      apt:
        name: cassandra
        update_cache: yes

    # - name: Basic configuration
    #   include_tasks: common-config.yml

    - name: Copy the template
      template:
        src: "cassandra.yaml.j2"
        dest: "/etc/cassandra/cassandra.yaml"
      notify: Starting Cassandra
    # - name: Deleting default data set
    #   shell: rm -rf /var/lib/cassandra/data/system/*